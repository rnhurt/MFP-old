<% form_for @person do |f| %>
  <%= f.error_messages %>

  <%= image_tag "stock_person.png", :class => 'polaroid-image', :size => '' %>

  <label>First Name</label>
  <%= f.text_field :first_name, :title => 'first' %><br />
  <label>Middle Name</label>
  <%= f.text_field :middle_name, :title => 'middle' %><br />
  <label>Last Name</label>
  <%= f.text_field :last_name, :title => 'last' %>

  <div class="clearfix">&nbsp;</div>

  <label>Details</label>
  <%= f.text_field :gender_id, :title => 'gender' %>
  <%= f.text_field :race_id, :title => 'race' %>
  <%= f.text_field :eye_color, :title => 'eye color' %>
  <%= f.text_field :hair_color, :title => 'hair color' %>

  <div class="clearfix">&nbsp;</div>

  <%= f.label 'Contacts' %>
  <table class="dataTable short ui-widget-content">
    <thead>
      <tr class="ui-widget-header">
        <td>Category</td>
        <td>Address</td>
        <td>Phone #</td>
      </tr>
    </thead>
    <tbody>
      <% @person.contacts.each do |contact| %>
        <tr>
          <%= content_tag :td, contact.role.try(:value) %>
          <%= content_tag :td, contact.location.full_address %>
          <%= content_tag :td, number_to_phone(contact.phone_number, :area_code => true, :delimiter => ' ') %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="clearfix">&nbsp;</div>

  <%= f.label 'Recent Activity' %>
  <table class="dataTable short ui-widget-content">
    <thead>
      <tr class="ui-widget-header">
        <td>Report #</td>
        <td>Offense</td>
        <td>Dispatch Date/Time</td>
      </tr>
    </thead>
    <tbody>
      <% @person.person_involvements.each do |involvement| %>
        <tr>
          <%= content_tag :td, involvement.report.number %>
          <%= content_tag :td, involvement.report.offense.try(:value) %>
          <%= content_tag :td, involvement.report.dispatched_at.strftime("%m/%d/%Y %R") %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <%= f.submit 'Save' %>
  <%= link_to 'Cancel', people_path %>

<% end %>